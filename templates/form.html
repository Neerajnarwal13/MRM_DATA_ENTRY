<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MRM Data Entry</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-body">

          <div class="d-flex justify-content-between mb-3">
            <h3 class="card-title">MRM Data Entry - Monthly Form</h3>
            <a href="{{ url_for('admin_login') }}" class="btn btn-outline-dark btn-sm">
              Admin Login
            </a>
          </div>

          <!-- Plant Name -->
          <div class="alert alert-secondary">
            <strong>Plant:</strong> {{ session.plant_name }}
          </div>

          <form action="/submit" method="POST">

            <!-- MONTH + RUN TIME -->
            <div class="mb-3 row">
              <div class="col">
                <label class="form-label">Month</label>
                <input
                  type="month"
                  name="month"
                  class="form-control"
                  required
                  readonly
                  onchange="formatMonth(this)">
              </div>
              <div class="col">
                <label class="form-label">Run Time</label>
                <input name="run_time" class="form-control">
              </div>
            </div>

            <!-- FB + TOTAL PRODUCTION -->
            <div class="mb-3 row">
              <div class="col">
                <label class="form-label">F/B</label>
                <input name="fb" class="form-control">
              </div>
              <div class="col">
                <label class="form-label">Total Production</label>
                <input name="total_production" type="number" step="any" class="form-control">
              </div>
            </div>

            <!-- GAS + SALE -->
            <div class="mb-3 row">
              <div class="col">
                <label class="form-label">Total Gas Consumption</label>
                <input name="total_gas" type="number" step="any" class="form-control">
              </div>
              <div class="col">
                <label class="form-label">Total Sale</label>
                <input name="total_sale" type="number" step="any" class="form-control">
              </div>
            </div>

            <!-- KWH + LOAD -->
            <div class="mb-3 row">
              <div class="col">
                <label class="form-label">kWh</label>
                <input name="kwh" type="number" step="any" class="form-control">
              </div>
              <div class="col">
                <label class="form-label">Total Load</label>
                <input name="total_load" type="number" step="any" class="form-control">
              </div>
            </div>

            <!-- BREAKDOWNS -->
            <div class="mb-3">
              <label class="form-label">Production Breakdown</label>
              <input name="prod_breakdown" class="form-control">
            </div>

            <div class="mb-3">
              <label class="form-label">Maintenance Breakdown</label>
              <input name="maint_breakdown" class="form-control">
            </div>

            <!-- DG + DIESEL + BILL -->
            <div class="mb-3 row">
              <div class="col">
                <label class="form-label">DG</label>
                <input name="dg" class="form-control">
              </div>
              <div class="col">
                <label class="form-label">Diesel (Ltr)</label>
                <input name="diesel" type="number" step="any" class="form-control">
              </div>
              <div class="col">
                <label class="form-label">Electricity Bill</label>
                <input name="electricity_bill" type="number" step="any" class="form-control">
              </div>
            </div>

            <button class="btn btn-primary w-100">Submit</button>

          </form>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- MONTH FORMAT SCRIPT -->
<script>
function formatMonth(input) {
  if (!input.value) return;

  const monthNumber = parseInt(input.value.split('-')[1]);

  const months = [
    "JAN", "FEB", "MAR", "APR", "MAY", "JUN",
    "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"
  ];

  input.value = months[monthNumber - 1];
}
</script>

</body>
</html>
